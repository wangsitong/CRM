<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>ECharts</title>
    <!-- 引入 echarts.js -->
    <!-- Echarts3 -->
  <script type="text/javascript" src="https://cdn.bootcss.com/echarts/4.2.1-rc1/echarts.min.js"></script>
    <!-- 全国344个市、区、州对应的数字编号 -->
    <script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>

</head>

<body>
    <div id="main" style="width: 100%;height:800px;"></div>

    <script>
        var uploadedDataURL = "420500.json";

        function showProvince() {
            var name = 'YC';

            // myChart.showLoading();

            $.get(uploadedDataURL, function (geoJson) {
                console.log(geoJson);
                // myChart.hideLoading();

                echarts.registerMap(name, geoJson);


                var myChart = echarts.init(document.getElementById('main'));

                var option = {

                    title: {
                        text: "大宜昌区域",
                        left: 'center'
                    },
                    tooltip: {
                        trigger: 'item',
                        formatter: function (params) {
                            console.log(params);
                            var value = (params.value + '').split('.');
                            value = value[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g, '$1,');
                            return params.seriesName + '<br/>' + params.name + ': ' + value;
                        }
                    },

                    visualMap: {
                        //show:false,
                        min: 0,
                        max: 1000,
                        color:['#e42515','#fad3d0'],
                        left: 'left',
                        top: 'bottom',
                        text: ['高', '低'], // 文本，默认为数值文本
                        calculable: true,
                        inRange: {
                          color: ['lightskyblue','yellow', 'orangered']
                        }
                    },
                    toolbox: {
                        show: true,
                        orient: 'vertical',
                        left: 'right',
                        top: 'center',
                        feature: {
                            dataView: {
                                readOnly: false
                            },
                            restore: {},
                            saveAsImage: {}
                        }
                    },
                    series: [{
                        type: 'map',
                        map: name,
                        name: '销量',
                        label: {
                            normal: {
                                show: true
                            },
                            emphasis: {
                                textStyle: {
                                    color: '#fff'
                                }
                            }
                        },
                        itemStyle: {
                            normal: {
                                borderColor: '#389BB7',
                                areaColor: '#fff',
                            },
                            emphasis: {
                                areaColor: '#389BB7',
                                borderWidth: 0
                            }
                        },
                        animation: false,

                        data: [{
                            name: '枝江市',
                            value: 100,
                            total: 500,
                        },
                        {
                            name: '秭归县',
                            value: 10
                        },
                        {
                            name: '猇亭区',
                            value: 20
                        },
                        {
                            name: '长阳土家族自治县',
                            value: 30
                        },
                        {
                            name: '当阳市',
                            value: 40
                        },
                        {
                            name: '点军区',
                            value: 41
                        },
                        {
                            name: '五峰土家族自治县',
                            value: 15
                        },
                        {
                            name: '伍家岗区',
                            value: 25
                        },
                        {
                            name: '西陵区(大客户)',
                            value: 35
                        },
                        {
                            name: '兴山县',
                            value: 35
                        },
                        {
                            name: '夷陵区',
                            value: 35
                        },
                        {
                            name: '宜都市',
                            value: 35
                        },
                        {
                            name: '远安县',
                            value: 35
                        }

                        ]

                    }],   // name ,和json里的name一致

                };

                var opts = {
                    title: {
                        text: "大宜昌区域",
                        left: 'center'
                    },
                    tooltip: {
                        trigger: 'item',
                        formatter: function (params) {
                            console.log(params);
                            var value = (params.value + '').split('.');
                            value = value[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g, '$1,');
                            return params.seriesName + '<br/>' + params.name + ': ' + value;
                        }
                    },
                    visualMap: {
                        //show:false,
                        min: 0,
                        max: 1500,
                        color:['#e42515','#fad3d0'],
                        left: 'left',
                        top: 'bottom',
                        text: ['高', '低'], // 文本，默认为数值文本
                        calculable: true,
                        inRange: {
                            color: ['lightskyblue','yellow', 'orangered']
                        }
                    },
                    toolbox: {
                        show: true,
                        orient: 'vertical',
                        left: 'right',
                        top: 'center',
                        feature: {
                            dataView: {
                                readOnly: false
                            },
                            restore: {},
                            saveAsImage: {}
                        }
                    },
                    series:[{
                        type: 'map',
                        map: name,
                        name: '销量',
                        label: {
                            normal: {
                                show: true
                            },
                            emphasis: {
                                textStyle: {
                                    color: '#fff'
                                }
                            }
                        },
                        itemStyle: {
                            normal: {
                                borderColor: '#389BB7',
                                areaColor: '#fff',
                            },
                            emphasis: {
                                areaColor: '#389BB7',
                                borderWidth: 0
                            }
                        },
                        animation: false,

                        // "type":"map",
                        // "name":"销量",
                        // "roam":true,
                        // "map":"YiChang",
                        // "label":{"normal":{"show":true},"emphasis":{"textStyle":{"color":"#fff"}}},
                        // itemStyle: {
                        //     normal: {
                        //         borderColor: '#389BB7',
                        //         areaColor: '#fff',
                        //     },
                        //     emphasis: {
                        //         areaColor: '#389BB7',
                        //         borderWidth: 0
                        //     }
                        // },
                        data:[
                            {"name":"当阳","value":531.53},{"name":"夷陵","value":1212},{"name":"城区","value":740},
                            {"name":"枝江","value":253},{"name":"长阳","value":807},{"name":"秭归","value":393},
                            {"name":"远安","value":134},{"name":"宜都","value":341},{"name":"五峰","value":248},
                            {"name":"兴山","value":680}
                        ]
                    }]
                };
                myChart.setOption(opts);
            });

        }

        var currentIdx = 0;

        showProvince();

        /*myChart.on('click', function (params) {
            //console.log(params.name);

            var customerArea = params.name;
            alert(customerArea);

         });*/

    </script>


</body>

</html>
